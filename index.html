<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mental Health Helper</title>
  <style>
* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body {
    font-family: 'Georgia', 'Times New Roman', serif;
    background: #ffffff;
    color: #1e293b;
    min-height: 100vh;
    line-height: 1.6;
}
.container {
    max-width: 1000px;
    margin: 0 auto;
    padding: 20px;
}
.header {
    text-align: center;
    margin-bottom: 40px;
    background: #ffffff;
    padding: 30px;
    border-radius: 20px;
    border: 2px solid #8b5cf6;
    box-shadow: 0 8px 32px rgba(139, 92, 246, 0.1);
}

.header h1 {
    font-size: 2.5em;
    color: #8b5cf6;
    margin-bottom: 10px;
}

.header p {
    font-size: 1.1em;
    color: #64748b;
    font-style: italic;
}

/* Section */
.section {
    background: #ffffff;
    margin-bottom: 30px;
    padding: 25px;
    border-radius: 15px;
    border: 1px solid #e2e8f0;
    box-shadow: 0 4px 20px rgba(0, 0, 0, 0.05);
    transition: all 0.3s ease;
}

.section:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 25px rgba(139, 92, 246, 0.1);
    border-color: #c4b5fd;
}

.section h2 {
    color: #8b5cf6;
    margin-bottom: 20px;
    font-size: 1.4em;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Chat Section */
.chat-section {
    background: #ffffff;
    border: 2px solid #c4b5fd;
}

/* Input Groups */
.input-group {
    margin-bottom: 20px;
}

.input-group label {
    display: block;
    margin-bottom: 8px;
    color: #475569;
    font-weight: bold;
}

input[type="text"],
textarea {
    width: 100%;
    padding: 12px 16px;
    background: #ffffff;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    color: #1e293b;
    font-size: 1em;
    font-family: inherit;
    transition: all 0.3s ease;
}

input[type="text"]:focus,
textarea:focus {
    outline: none;
    border-color: #8b5cf6;
    box-shadow: 0 0 0 3px rgba(139, 92, 246, 0.1);
}

/* Buttons */
.btn {
    background: #8b5cf6;
    color: #ffffff;
    border: none;
    padding: 12px 25px;
    border-radius: 25px;
    cursor: pointer;
    font-size: 1em;
    font-weight: bold;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(139, 92, 246, 0.2);
}

.btn:hover {
    background: #7c3aed;
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(139, 92, 246, 0.3);
}

.btn:active {
    transform: translateY(0);
}

/* Messages */
.messages {
    max-height: 400px;
    overflow-y: auto;
    margin-top: 20px;
    padding: 15px;
    background: #f8fafc;
    border-radius: 10px;
    border: 1px solid #e2e8f0;
}

.message {
    margin-bottom: 15px;
    padding: 12px 16px;
    border-radius: 10px;
    animation: fadeIn 0.5s ease-in;
}

.message.user {
    background: #ffffff;
    margin-left: 20px;
    border-left: 4px solid #8b5cf6;
    border: 1px solid #e2e8f0;
}

.message.ai {
    background: #f1f5f9;
    margin-right: 20px;
    border-left: 4px solid #8b5cf6;
}

.message-role {
    font-weight: bold;
    margin-bottom: 5px;
    color: #8b5cf6;
}

/* Expandable Sections */
.expandable {
    background: #ffffff;
    border: 1px solid #e2e8f0;
    border-radius: 10px;
    overflow: hidden;
}

.expandable-header {
    padding: 15px;
    background: #f8fafc;
    cursor: pointer;
    font-weight: bold;
    color: #8b5cf6;
    transition: all 0.3s ease;
    border-bottom: 1px solid #e2e8f0;
}

.expandable-header:hover {
    background: #f1f5f9;
}

.expandable-content {
    display: none;
    padding: 20px;
    background: #ffffff;
}

.expandable-content.show {
    display: block;
    animation: slideDown 0.3s ease;
}

/* Slider & Mood */
.slider-container {
    margin: 20px 0;
}

input[type="range"] {
    width: 100%;
    height: 8px;
    border-radius: 5px;
    background: #e2e8f0;
    outline: none;
    -webkit-appearance: none;
}

input[type="range"]::-webkit-slider-thumb {
    appearance: none;
    width: 20px;
    height: 20px;
    border-radius: 50%;
    background: #8b5cf6;
    cursor: pointer;
    box-shadow: 0 2px 10px rgba(139, 92, 246, 0.3);
}

.mood-display {
    text-align: center;
    font-size: 1.2em;
    font-weight: bold;
    color: #8b5cf6;
    margin-top: 10px;
}

.mood-chart {
    width: 100%;
    height: 200px;
    background: #f8fafc;
    border-radius: 10px;
    margin-top: 15px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: #64748b;
    font-style: italic;
    border: 1px solid #e2e8f0;
}

/* Crisis Resources */
.crisis-resources {
    background: #fef7ff;
    border-left: 4px solid #8b5cf6;
    padding: 20px;
    border-radius: 10px;
    margin-top: 20px;
    border: 1px solid #e879f9;
}

.crisis-resources h3 {
    color: #8b5cf6;
    margin-bottom: 15px;
}

/* Footer */
.footer {
    text-align: center;
    margin-top: 40px;
    padding: 20px;
    color: #64748b;
    font-style: italic;
}

/* Animations */
@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(10px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
}

@keyframes slideDown {
    from {
        opacity: 0;
        max-height: 0;
    }
    to {
        opacity: 1;
        max-height: 500px;
    }
}

/* Responsive Design */
@media (max-width: 768px) {
    .container {
        padding: 15px;
    }

    .header h1 {
        font-size: 2em;
    }

    .section {
        padding: 20px;
    }
}

    .powered-by {
      text-align: right;
      font-size: 0.9em;
      color: #64748b;
      margin-top: 5px;
      font-style: italic;
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="header">
      <h1>üß† Mental Health Helper</h1>
      <p>A safe space to get advice, therapy tips, panic attack help, and track your mood. Not a replacement for therapy.</p>
    </div>

    <!-- Chat Section -->
    <div class="section chat-section">
      <h2>üí¨ Chat for Advice</h2>
      <div class="input-group">
        <label for="userInput">What's on your mind? (e.g., 'I'm stressed'):</label>
        <input type="text" id="userInput" placeholder="Share your thoughts or concerns..." />
      </div>
      <button class="btn" onclick="getAdvice()">Get Advice</button>
      <div id="messages" class="messages" style="display: none;"></div>
      <div id="poweredBy" class="powered-by" style="display: none;">Powered by Google Gemini AI ‚ú®</div>
    </div>

    <!-- Therapy Tips -->
    <div class="section">
      <h2>üå± General Therapy & Self-Help Options</h2>
      <div class="expandable">
        <div class="expandable-header" onclick="toggleExpander(this)">
          Click to view general therapy practices ‚ñº
        </div>
        <div class="expandable-content">
         <h3 style="color: #8b5cf6; margin-bottom: 15px;">Evidence-Based Therapeutic Techniques</h3>
                    
                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #64748b; margin-bottom: 10px;">üß† Cognitive Behavioral Techniques</h4>
                        <p><strong>‚Ä¢ Thought challenging:</strong> Question negative automatic thoughts</p>
                        <p><strong>‚Ä¢ Behavioral activation:</strong> Schedule meaningful activities daily</p>
                        <p><strong>‚Ä¢ Problem-solving:</strong> Break challenges into manageable steps</p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #64748b; margin-bottom: 10px;">üßò Mindfulness & Relaxation</h4>
                        <p><strong>‚Ä¢ Progressive muscle relaxation:</strong> Tense and release muscle groups</p>
                        <p><strong>‚Ä¢ Mindful breathing:</strong> Focus on breath for 5-10 minutes daily</p>
                        <p><strong>‚Ä¢ Grounding techniques:</strong> 5-4-3-2-1 sensory method</p>
                    </div>

                    <div style="margin-bottom: 20px;">
                        <h4 style="color: #64748b; margin-bottom: 10px;">üíö Self-Care Strategies</h4>
                        <p><strong>‚Ä¢ Sleep hygiene:</strong> Consistent sleep schedule and bedtime routine</p>
                        <p><strong>‚Ä¢ Physical activity:</strong> Regular movement to boost mood and energy</p>
                        <p><strong>‚Ä¢ Social connection:</strong> Maintain relationships and seek support</p>
                        <p><strong>‚Ä¢ Journaling:</strong> Track thoughts, feelings, and patterns</p>
                    </div>

                    <div style="margin-bottom: 10px;">
                        <h4 style="color: #64748b; margin-bottom: 10px;">üÜò Crisis Management</h4>
                        <p><strong>‚Ä¢ Safety planning:</strong> Identify warning signs and coping strategies</p>
                        <p><strong>‚Ä¢ Support network:</strong> Have emergency contacts readily available</p>
                        <p><strong>‚Ä¢ Professional resources:</strong> Know when to seek immediate help</p>
                    </div>
                </div>
            </div>
        </div>
        </div>
      </div>
    </div>

    <!-- Mood Tracking -->
    <div class="section">
      <h2>üìä Track Your Mood</h2>
      <div class="slider-container">
        <label for="moodSlider">How's your mood today? (1 = low, 5 = high)</label>
        <input type="range" id="moodSlider" min="1" max="5" value="3" oninput="updateMoodDisplay()" />
        <div id="moodDisplay" class="mood-display">Mood: 3/5 - üòê Neutral</div>
      </div>
      <button class="btn" onclick="logMood()">Log Mood</button>
      <div id="moodChart" class="mood-chart" style="display: none;">
        Mood tracking visualization would appear here
      </div>
    </div>

    <div class="footer">
      <p>Prototype v12.1: Now with Gemini-powered backend integration.</p>
    </div>
  </div>

<script>
  let messages = [];
  let moods = [];

  const guides = {
  const guides = {
  stress: `üòå Coping with Stress
1. Take short breaks between tasks to reset your mind.
2. Practice deep breathing: inhale for 4, hold 4, exhale 4.
3. Stay hydrated and eat balanced meals to keep energy steady.
4. Break tasks into smaller steps instead of doing everything at once.
5. Try light exercise like stretching or a short walk.`,

  panic: `üòÆ‚Äçüí® Panic/Anxiety Attack Help
1. Remind yourself the feeling will pass ‚Äî it‚Äôs temporary.
2. Use the 5-4-3-2-1 grounding technique: name 5 things you see, 4 you feel, 3 you hear, 2 you smell, 1 you taste.
3. Slow down your breathing: in through the nose for 4, out through the mouth for 6.
4. Relax your muscles by unclenching fists, jaw, and shoulders.
5. Call or text a trusted person for support.`,

  depression: `üåß When Feeling Low/Depressed
1. Keep a daily routine (wake, eat, sleep at the same times).
2. Set one small, achievable goal each day (e.g., make your bed).
3. Stay connected: reach out to one friend or family member.
4. Do something you once enjoyed, even if it feels small.
5. Write down one positive or grateful thought daily.`,

  sleep: `üåô Better Sleep Tips
1. Go to bed and wake up at the same time every day.
2. Avoid caffeine, nicotine, and heavy meals 4‚Äì6 hours before bed.
3. Keep your room cool, dark, and quiet for better sleep quality.
4. Limit screen use (phones, laptops) 1 hour before bedtime.
5. Try calming activities before bed like reading or warm showers.`
};

  };

 const guides = {
  stress: `üòå Coping with Stress
1. Take short breaks between tasks to reset your mind.
2. Practice deep breathing: inhale for 4, hold 4, exhale 4.
3. Stay hydrated and eat balanced meals to keep energy steady.
4. Break tasks into smaller steps instead of doing everything at once.
5. Try light exercise like stretching or a short walk.`,

  panic: `üòÆ‚Äçüí® Panic/Anxiety Attack Help
1. Remind yourself the feeling will pass ‚Äî it‚Äôs temporary.
2. Use the 5-4-3-2-1 grounding technique: name 5 things you see, 4 you feel, 3 you hear, 2 you smell, 1 you taste.
3. Slow down your breathing: in through the nose for 4, out through the mouth for 6.
4. Relax your muscles by unclenching fists, jaw, and shoulders.
5. Call or text a trusted person for support.`,

  depression: `üåß When Feeling Low/Depressed
1. Keep a daily routine (wake, eat, sleep at the same times).
2. Set one small, achievable goal each day (e.g., make your bed).
3. Stay connected: reach out to one friend or family member.
4. Do something you once enjoyed, even if it feels small.
5. Write down one positive or grateful thought daily.`,

  sleep: `üåô Better Sleep Tips
1. Go to bed and wake up at the same time every day.
2. Avoid caffeine, nicotine, and heavy meals 4‚Äì6 hours before bed.
3. Keep your room cool, dark, and quiet for better sleep quality.
4. Limit screen use (phones, laptops) 1 hour before bedtime.
5. Try calming activities before bed like reading or warm showers.`
};
const resources = `üìû Crisis Resources (If You're Struggling)
- üá∫üá∏ Dial **988** for the Suicide & Crisis Lifeline (available 24/7)
- üì± Text **HOME** to 741741 for the Crisis Text Line
- üö® If you ever feel unsafe, please call your local emergency services immediately

‚ö†Ô∏è Note: This app is for guidance only and not a substitute for professional therapy.`;


  function generateResponse(userInput) {
    const text = userInput.toLowerCase();
    if (text.includes('panic') || text.includes('anxiety') || text.includes('attack'))
      return guides.panic + "\n\n" + resources;
    if (text.includes('stress') || text.includes('stressed') || text.includes('pressure'))
      return guides.stress;
    if (text.includes('depressed') || text.includes('sad') || text.includes('low') || text.includes('hopeless'))
      return guides.depression + "\n\n" + resources;
    if (text.includes('sleep') || text.includes('insomnia') || text.includes('tired'))
      return guides.sleep;

    return `General wellness tips:\n1. Breathe deeply...\n2. Reach out...\n3. Small self-care...`;
  }

  async function getAdvice() {
    const userInput = document.getElementById('userInput').value.trim();
    if (!userInput) return;
    messages.push({ role: 'user', content: userInput });

    try {
      const res = await fetch("http://localhost:8502/api/respond", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ text: userInput })
      });

      if (res.ok) {
        const data = await res.json();
        messages.push({ role: 'ai', content: data.response });
        document.getElementById("poweredBy").style.display = "block"; // Show Gemini tag
      } else {
        throw new Error("Backend error");
      }
    } catch (err) {
      const aiResponse = generateResponse(userInput);
      messages.push({ role: 'ai', content: aiResponse });
      document.getElementById("poweredBy").style.display = "none"; // Hide if fallback
    }

    displayMessages();
    document.getElementById('userInput').value = '';
  }

  function displayMessages() {
    const messagesDiv = document.getElementById('messages');
    messagesDiv.innerHTML = '';
    messagesDiv.style.display = 'block';

    messages.forEach(msg => {
      const div = document.createElement('div');
      div.className = `message ${msg.role}`;
      div.innerHTML = `<div class="message-role">${msg.role === 'user' ? 'You:' : 'AI:'}</div>
                       <div>${msg.content.replace(/\n/g, '<br>')}</div>`;
      messagesDiv.appendChild(div);
    });

    messagesDiv.scrollTop = messagesDiv.scrollHeight;
  }

  function updateMoodDisplay() {
    const slider = document.getElementById('moodSlider');
    const display = document.getElementById('moodDisplay');
    const labels = ['üò¢ Very Low','üòî Low','üòê Neutral','üôÇ Good','üòä Great'];
    display.textContent = `Mood: ${slider.value}/5 - ${labels[slider.value - 1]}`;
  }

  function logMood() {
    const moodValue = parseInt(document.getElementById('moodSlider').value);
    const now = new Date();
    moods = [{ date: now.toLocaleString(), mood: moodValue }];

    const chartDiv = document.getElementById('moodChart');
    chartDiv.style.display = 'block';
    chartDiv.innerHTML = `<h3 style="color:#8b5cf6;">Your Latest Mood Log</h3>
                          <p><strong>Date:</strong> ${moods[0].date}</p>
                          <p><strong>Mood:</strong> ${moods[0].mood}/5</p>
                          <div style="font-size:2em;">
                            ${['üò¢','üòî','üòê','üôÇ','üòä'][moods[0].mood - 1]}
                          </div>`;
  }

  function toggleExpander(header) {
    const content = header.nextElementSibling;
    if (content.classList.contains('show')) {
      content.classList.remove('show');
      header.innerHTML = header.innerHTML.replace('‚ñ≤','‚ñº');
    } else {
      content.classList.add('show');
      header.innerHTML = header.innerHTML.replace('‚ñº','‚ñ≤');
    }
  }

  document.getElementById('userInput').addEventListener('keypress', e => {
    if (e.key === 'Enter') getAdvice();
  });

  updateMoodDisplay();
</script>
</body>
</html>


